<?xml version="1.0"?>
<tool_dependency>
    <package name="perl" version="5.18.1">
        <repository name="package_perl_5_18" owner="liuyue" prior_installation_required="True" changeset_revision="ffeb7bc77ca9" toolshed="http://onotta669816x:9009"/>
    </package>

    <package name="augustus" version="3.0.2">
        <repository name="package_augustus_3_0_2" owner="liuyue" prior_installation_required="True" changeset_revision="648122919c1f" toolshed="http://onotta669816x:9009"/>
    </package> 

    <package name="snap" version="2006-07-28">
        <repository name="package_snap_2006_07_28" owner="liuyue" prior_installation_required="True" changeset_revision="e0729ff4910c" toolshed="http://onotta669816x:9009"/>
    </package>

    <package name="rmblast" version="2.2.28">
        <repository name="package_rmblast_2_2_28" owner="liuyue" prior_installation_required="True" changeset_revision="e1bd654373b8" toolshed="http://onotta669816x:9009"/>
    </package>

    <package name="repeatmasker" version="4.0.5">
        <repository name="package_repeatmasker_4_0_5" owner="liuyue" prior_installation_required="True" 
			changeset_revision="6912ce3a9a18" toolshed="http://onotta669816x:9009"/>
    </package>

    <package name="exonerate" version="2.2.0">
        <repository name="package_exonerate_2_2_0" owner="liuyue" prior_installation_required="True" changeset_revision="7384b1e16200" toolshed="http://onotta669816x:9009"/>
    </package>


    <package name="maker" version="2.31.6">
        <install version="1.0">
            <actions>
		<!-- download must be the first action, otherwise the file disappears after downloading OR it downloads and decompress but don't cd into it-->
                <action type="download_by_url">http://yandell.topaz.genetics.utah.edu/maker_downloads/F7BF/36D9/5A75/F93993D356C3396F722AD07D8B52/maker-2.31.6.tgz</action>
		<action type="set_environment_for_install">
			<repository name="package_snap_2006_07_28" owner="liuyue" changeset_revision="e0729ff4910c" toolshed="http://onotta669816x:9009">
				<package name="snap" version="2006-07-28" />
			</repository>
		</action>
		<action type="set_environment_for_install">
			<repository name="package_augustus_3_0_2" owner="liuyue" changeset_revision="648122919c1f" toolshed="http://onotta669816x:9009">
				<package name="augustus" version="3.0.2" />
			</repository>
		</action>
		<action type="set_environment_for_install">
			<repository name="package_repeatmasker_4_0_5" owner="liuyue" changeset_revision="6912ce3a9a18" toolshed="http://onotta669816x:9009">
				<package name="repeatmasker" version="4.0.5" />
			</repository>
		</action>
		<action type="set_environment_for_install">
		   <repository name="package_perl_5_18" owner="liuyue" changeset_revision="ffeb7bc77ca9" toolshed="http://onotta669816x:9009">
			<package name="perl" version="5.18.1" />
		   </repository>
		</action>
		<action type="set_environment_for_install">
		   <repository name="package_rmblast_2_2_28" owner="liuyue" changeset_revision="e1bd654373b8" toolshed="http://onotta669816x:9009">
			<package name="rmblast" version="2.2.28" />
		   </repository>
		</action>
		<action type="set_environment_for_install">
		   <repository name="package_exonerate_2_2_0" owner="liuyue" changeset_revision="7384b1e16200" toolshed="http://onotta669816x:9009">
			<package name="exonerate" version="2.2.0" />
		   </repository>
		</action>

		<!--<action type="shell_command">wget http://backpan.perl.org/authors/id/T/TI/TIMB/DBI-1.57.tar.gz</action>
		<action type="shell_command">tar -xvzf DBI-1.57.tar.gz</action>
		<action type="change_directory">DBI-1.57</action>
		<action type="shell_command">ls</action>
		<action type="shell_command">perl Makefile.PL; make; make test</action>
		<action type="change_directory">..</action>-->

                <!--<action type="shell_command">echo "checking perl requirements"</action> 
                <action type="shell_command">perldoc perllocal</action>   cpan -l -->

		<!--<action type="setup_perl_environment">
		   <repository name="package_perl_5_18" owner="liuyue" changeset_revision="ffeb7bc77ca9" toolshed="http://onotta669816x:9009">
			<package name="perl" version="5.18.1" />
		   </repository>
			<package>DBI</package>
			<package>LWP::Simple</package>
			<package>Bio::Root::Version</package>
			<package>Bit::Vector</package>
			<package>DBD::SQLite</package>
			<package>IO::All</package>
			<package>Inline::C</package>
			<package>Perl::Unsafe::Signals</package>
			<package>Want</package>
			<package>forks</package>
			<package>forks::shared</package>
		</action>-->



                <action type="shell_command">echo "n" | perl ./src/Build.PL</action> 
		<action type="shell_command">echo $'y\ny\ny\ny\ny\ny\ny\ny\ny\ny\ny\ny\ny\n' | ./src/Build installdeps</action> 
                <action type="shell_command">./src/Build install</action>
		<action type="move_directory_files">
			<source_directory>.</source_directory>
			<destination_directory>$INSTALL_DIR</destination_directory>
		</action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/bin</environment_variable>
                </action>
                <action type="set_environment">
                    <environment_variable name="MAKERPATH" action="set_to">$INSTALL_DIR</environment_variable>
                </action>
            </actions>
        </install>
        <readme>
This file automatically installs Maker.

Maker depends on other program, they are installed in separate packages

They are: SNAP, Augustus, NCBI Blast+ with RM blast, Exonerate, Repeatmasker (with TRF and RM blast)

Maker will also install some Perl packages with cpan. 

This means it needs to be able to write to the .cpan directory in the hosting user's home directory.

Currently, a few of these tools (Blast, TRF, Exonerate) are configured only for linux-64 systems.

Other systems might be supported in the future.

        </readme>
    </package>
</tool_dependency>

