<?xml version="1.0" ?>
<tool id="merge_otu_maps" name="merge otu maps" version="1.7.0">
	<description>Merge OTU mapping files</description>
	<requirements>
<requirement type="package" version="1.7.0">qiime</requirement>	</requirements>
	<command>merge_otu_maps.py
#def list_dict_to_string(list_dict):
	#set $file_list = list_dict[0]['additional_input'].__getattr__('file_name')
	#for d in list_dict[1:]:
		#set $file_list = $file_list + ',' + d['additional_input'].__getattr__('file_name')
	#end for
	#return $file_list
#end def
 -i $list_dict_to_string($input_files_otu_map_fps) -o $output_fp
#if str($failures_fp) != 'None':
 -f $failures_fp
#end if
</command>
	<inputs>
		<repeat name="input_files_otu_map_fps" optional="False" title="otu_map_fps">
			<param label="-i/--otu_map_fps: the otu map filepaths, comma-separated and ordered as the OTU pickers were run [REQUIRED]" name="additional_input" type="data"/>
		</repeat>
		<param label="-f/--failures_fp: failures filepath, if applicable" name="failures_fp" optional="True" type="data"/>
	</inputs>
	<outputs>
		<data format="txt" name="output_fp"/>
	</outputs>
	<help>This script merges OTU mapping files generated by denoise_wrapper.py and/or pick_otus.py

For example, if otu_map1.txt contains:

=   ====    ====    ====
0   seq1    seq2    seq5
1   seq3    seq4    
2   seq6    seq7    seq8
=   ====    ====    ====

and otu_map2.txt contains:

=== =   =
110 0   2
221 1
=== =   =

The resulting OTU map will be:

=== ====    ====    ====    ====    ====    ====
110 seq1    seq2    seq5    seq6    seq7    seq8
221 seq3    seq4
=== ====    ====    ====    ====    ====    ====

The result of this script is an OTU mapping file.</help>
</tool>
