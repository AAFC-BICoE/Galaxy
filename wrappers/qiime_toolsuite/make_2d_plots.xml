<?xml version="1.0" ?>
<tool id="make_2d_plots" name="make 2d plots" version="1.7.0">
	<description>Make 2D PCoA Plots</description>
	<requirements>
		<requirement type="package">qiime</requirement>
	</requirements>
	<command>uncompress_tgz.py -i $coord_fname -o make_2d_plots_input;
make_2d_plots.py -i make_2d_plots_input -m $map_fname
#if str($colorby):
 -b $colorby
#end if

#if str($prefs_path) != 'None':
 -p $prefs_path
#end if

#if str($background_color) != 'None':
 -k $background_color
#end if

#if $ellipsoid_opacity:
 --ellipsoid_opacity=$ellipsoid_opacity
#end if

#if str($ellipsoid_method) != 'None':
 --ellipsoid_method=$ellipsoid_method
#end if

#if str($master_pcoa) != 'None':
 --master_pcoa=$master_pcoa
#end if

#if $scree:
 --scree
#end if
 -o make_2d_plots_output;
compress_path.py -i make_2d_plots_output -o $output_dir
</command>
	<inputs>
		<param label="-i/--coord_fname: Input principal coordinates filepath (i.e., resulting file from principal_coordinates.py).  Alternatively, a directory containing multiple principal coordinates files for jackknifed PCoA results." name="coord_fname" type="data"/>
		<param label="-m/--map_fname: Input metadata mapping filepath" name="map_fname" optional="False" type="data"/>
		<param label="-b/--colorby: Comma-separated list categories metadata categories (column headers) to color by in the plots. The categories must match the name of a column header in the mapping file exactly. Multiple categories can be list by comma separating them without spaces. The user can also combine columns in the mapping file by separating the categories by &quot;&amp;&amp;&quot; without spaces. [default=color by all]" name="colorby" optional="True" type="text"/>
		<param label="-p/--prefs_path: Input user-generated preferences filepath. NOTE: This is a file with a dictionary containing preferences for the analysis. [default: None]" name="prefs_path" optional="True" type="data"/>
		<param label="-k/--background_color: Background color to use in the plots. [default: white]" name="background_color" optional="True" type="select">
			<option selected="True" value="None">Selection is Optional</option>
			<option value="black">black</option>
			<option value="white">white</option>
		</param>
		<param default="0.33" label="--ellipsoid_opacity: Used only when plotting ellipsoids for jackknifed beta diversity (i.e. using a directory of coord files instead of a single coord file). The valid range is between 0-1. 0 produces completely transparent (invisible) ellipsoids and 1 produces completely opaque ellipsoids. [default=0.33]" name="ellipsoid_opacity" optional="True" type="float"/>
		<param label="--ellipsoid_method: Used only when plotting ellipsoids for jackknifed beta diversity (i.e. using a directory of coord files instead of a single coord file). Valid values are &quot;IQR&quot; and &quot;sdev&quot;. [default=IQR]" name="ellipsoid_method" optional="True" type="select">
			<option selected="True" value="None">Selection is Optional</option>
			<option value="IQR">IQR</option>
			<option value="sdev">sdev</option>
		</param>
		<param default="None" label="--master_pcoa: Used only when plotting ellipsoids for jackknifed beta diversity  (i.e. using a directory of coord files instead of a single coord file). These coordinates will be the center of each ellipisoid. [default: None; arbitrarily chosen PC matrix will define the center point]" name="master_pcoa" optional="True" type="data"/>
		<param label="--scree: Generate the scree plot [default: False]" name="scree" selected="False" type="boolean"/>
	</inputs>
	<outputs>
		<data format="tgz" name="output_dir"/>
	</outputs>
	<help>This script generates 2D PCoA plots using the principal coordinates file generated by performing beta diversity measures of an OTU table.
This script generates an output folder, which contains several files. To best view the 2D plots, it is recommended that the user views the _pcoa_2D.html file.</help>
</tool>
