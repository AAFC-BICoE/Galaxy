<tool id ="irods_pull_main" name="Import to iRods" version="0.1.0">
	<description>Pull file into galaxy history</description>
	<requirements>
		<requirement type="package" version="0.4.0">pythonirodsclient</requirement>
	</requirements>
	<code file="get_n_files.py" />	
	<command interpreter="python">
	#import os.path
	#if $typePath.type_path=="abs"
		irods_pull.py $typePath.filenamesAbs $output
		#set outPath=${typePath.filenamesAbs.__str__}
	#else
		irods_pull.py $typePath.filenamesExi $output
		#set outPath=${typePath.filenamesExi.__str__}
	#end if
<!--	#set $newName = [$os.path.basename($filePath.__str__)]-->
<!--	irods_pull.py $filePath $output-->
<!--	#import os.path-->
<!--	#set $pathToStrip = $filePath-->
<!--	#echo $pathToStrip-->
<!--	#set $newName = [os.path.basename($filePath)]-->
<!--	#while '/' in $pathToStrip
		$pathToStrip = $pathToStrip[1:len($pathToStrip)]
	#end while
	#set $newName=$pathToStrip
	]]>-->
<!--	$newName

$pathToStrip = str($pathToStrip)
	-->

	</command>
	<inputs>
		<conditional name="typePath">
			<param type="select" name="type_path" label="Choose how you will pass in your file name:" >
				<option value="abs">Absolute Path</option>
				<option value="exi">Existing Path</option>
			</param>
			<when value="abs">
				<param type="text" name="filenamesAbs" label="Choose file to upload" />
			</when>
			<when value="exi">
				<param type="text" name="depth" label="Depth of file:" />
				<param name = "filenamesExi" type="select" label="Existing files: " dynamic_options="get_n_files(depth)" optional="True" />
			</when>
		</conditional>				
	</inputs>
	
	
	<outputs>
			<data format="txt" name="output" label="$os.path.basename($outPath)" />
	</outputs>
	<help>
	Coming Soon
	</help>
</tool>
	
