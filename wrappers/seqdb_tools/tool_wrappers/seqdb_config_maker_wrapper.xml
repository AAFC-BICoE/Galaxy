<tool id="seqdb_config" name="SeqDB Configuration" version="1.3">
  <description> creates a personalized configuration file, used to access SeqDB Web Services. </description>
  <requirements>
      <requirement type="package" version="1.3">seqdb-py</requirement>
  </requirements>
  
  <command>
      seqdb_config_maker -k $api_key
  </command>


  <inputs>
      <param name="api_key" type="text" label="Sequence Database API Key" />
  </inputs>
  <outputs>
    <data name="seqdb_configuration"
        format="txt"
        from_work_dir="user_config.yaml"
        label="Sequence Database Configuration" />
  </outputs>

  <!-- Provide explanations for various exit status codes. Avoid situations where tool exists with status 0 but other errors (in Galaxy) set its status to Error -->
  <stdio>
  	   <!-- Since exit code 0 is not specified, the tool will execute successfully, even if Galaxy writes something to stderr. -->
  	  <exit_code range="1:" level="fatal" description="Error" />
      <exit_code range="2"   level="fatal"   description="Out of Memory" />
      <exit_code range="3:5" level="warning" description="Low disk space" />
      <exit_code range="6:63"  level="fatal"   description="Tool execution error (exit codes 6-63)" />
      <exit_code range="64"  level="fatal"   description="Command line usage error" />
      <exit_code range="65:72"  level="fatal"   description="Tool execution error (exit codes 65-72)" />
      <exit_code range="73"  level="fatal"   description="Can't create (user) output file" />
      <exit_code range="74:"  level="fatal"   description="Tool execution error (exit codes 74 and up)" />
  </stdio>

  <tests>
    <test>
      <output name="out_file" file="test_file.yaml" />
    </test>
  </tests>

  <help>
      
      **What it does**
      
      The tool creates a Sequence Database API configuration file, which can be used in a number of SeqDB API tools (e.g. tools in ITSx workflow).
      
      
      **What is an API Key?**
      
      API Key is a string of characters that is generated by Sequence Database to distinguish who requests information from its webservices. This key is unique for each Sequence Database user and identifies what kind of information to serve this particular user.
      
      
      **How do I get an API Key?**
      
      Log in to Sequence Database, select Account -> Profile. If the field "API Key" is empty, then click on "Generate New API Key" button. Copy the API Key string (long string with random characters) and paste it in this tool.
      
      **Do I need to regenerate API Key each time I run this tool?**
      
      No, and you don't need to go to Sequence Database each time either. Just save the key, once it is generated, and re-use it for the next run(s). 
      Note: you will only need to get the api key again if it was re-generated in Sequence Database.
      
  </help>

</tool>
